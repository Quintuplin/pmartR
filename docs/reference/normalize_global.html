<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate Normalization Parameters — normalize_global • pmartR</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Calculate Normalization Parameters — normalize_global" />

<meta property="og:description" content="Calculates normalization parameters based on the data using the specified subset and normalization functions with possibility of apply the normalization to the data." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pmartR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Quality_Control_with_pmartR.html">Quality Control and Normalization of Peptide Data with the `pmartR` Package</a>
    </li>
    <li>
      <a href="../articles/Statistical_Analysis_with_pmartR.html">Statistical Analysis with the `pmartR` Package</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/pmartR/pmartR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate Normalization Parameters</h1>
    <small class="dont-index">Source: <a href='https://github.com/pmartR/pmartR/blob/master/R/normalize_global.R'><code>R/normalize_global.R</code></a></small>
    <div class="hidden name"><code>normalize_global.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Calculates normalization parameters based on the data using the specified subset and normalization functions with possibility of apply the normalization to the data.</p>
    
    </div>

    <pre class="usage"><span class='fu'>normalize_global</span>(<span class='no'>omicsData</span>, <span class='no'>subset_fn</span>, <span class='no'>norm_fn</span>, <span class='kw'>params</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>apply_norm</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>backtransform</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>min_prop</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>omicsData</th>
      <td><p>an object of the class 'pepData', 'proData', 'metabData', or 'lipidData', created by <code><a href='as.pepData.html'>as.pepData</a></code>, <code><a href='as.proData.html'>as.proData</a></code>, <code><a href='as.metabData.html'>as.metabData</a></code>, or <code><a href='as.lipidData.html'>as.lipidData</a></code>, respectively. The function <code><a href='group_designation.html'>group_designation</a></code> must have been run on omicsData to use several of the subset functions (i.e. rip and ppp_rip).</p></td>
    </tr>
    <tr>
      <th>subset_fn</th>
      <td><p>character string indicating the subset function to use for normalization. See details for the current offerings.</p></td>
    </tr>
    <tr>
      <th>norm_fn</th>
      <td><p>character string indicating the normalization function to use for normalization. See details for the current offerings.</p></td>
    </tr>
    <tr>
      <th>params</th>
      <td><p>additional arguments passed to the chosen subset functions. See details for parameter specification and default values.</p></td>
    </tr>
    <tr>
      <th>apply_norm</th>
      <td><p>logical argument indicating if the normalization should be applied to the data. Defaults to FALSE. If TRUE, the normalization is applied to the data and an S3 object of the same class as <code>omicsData</code> (e.g. 'pepData') with normalized values in <code>e_data</code> is returned.</p></td>
    </tr>
    <tr>
      <th>backtransform</th>
      <td><p>logical argument indicating if parameters for back transforming the data, after normalization, should be calculated.  Defaults to FALSE. If TRUE, the parameters for back transforming the data after normalization will be calculated, and subsequently included in the data normalization if <code>apply_norm</code> is TRUE or <code>apply.normRes</code> is used downstream. See details for an explanation of how these factors are calculated.</p></td>
    </tr>
    <tr>
      <th>min_prop</th>
      <td><p>numeric threshold between 0 and 1 giving the minimum value for the proportion of features subset (rows of <code>e_data</code>)</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If apply_norm is FALSE, an S3 object of type 'normRes' is returned. This object contains a list with: subset method, normalization method, normalization parameters, number of features used in normalization, and proportion of features used in normalization. plot() and summary() methods are available for this object. If apply_norm is TRUE, then the normalized data is returned in an object of the appropriate S3 class (e.g. pepData).</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Below are details for specifying function and parameter options.</p>
    
    <h2 class="hasAnchor" id="subset-functions"><a class="anchor" href="#subset-functions"></a>Subset Functions</h2>

    
    <p>Specifying a subset function indicates the subset of features (rows of <code>e_data</code>) that should be used for computing normalization factors. The following are valid options: "all", "los", "ppp", "rip", and "ppp_rip". The option "all" is the subset that includes all features (i.e. no subsetting is done). The option "los" identifies the subset of the features associated with the top <code>L</code>, where <code>L</code> is a proportion between 0 and 1, order statistics. Specifically, the features with the top <code>L</code> proportion of highest absolute abundance are retained for each sample, and the union of these features is taken as the subset identified (Wang et al., 2006). The option "ppp" (orignally stands for percentage of peptides present) identifies the subset of features that are present/non-missing for a minimum <code>proportion</code> of samples (Karpievitch et al., 2009; Kultima et al., 2009). The option "rip" identifies features with complete data that have a p-value greater than a defined threshold <code>alpha</code> (common values include 0.1 or 0.25) when subjected to a Kruskal-Wallis test based (non-parametric one-way ANOVA) on group membership (Webb-Robertson et al., 2011). The option "ppp_rip" is equivalent to "rip" however rather than requiring features with complete data, features with at least a <code>proportion</code> of non-missing values are subject to the Kruskal-Wallis test.</p>
    
    <h2 class="hasAnchor" id="normalization-functions"><a class="anchor" href="#normalization-functions"></a>Normalization Functions</h2>

    
    <p>Specifying a normalization function indicates how normalization scale and location parameters should be calculated. The following are valid options: "median", "mean", "zscore", and "mad". Parameters for median centering are calculated if "median" is specified. The location estimates are the sample-wise medians of the subset data. There are no scale estimates for median centering. Parameters for mean centering are calculated if "mean" is specified. The location estimates are the sample-wise means of the subset data. There are no scale estimates for median centering. Parameters for z-score transformation are calculated if "zscore" is specified. The location estimates are the subset means for each sample. The scale estimates are the subset standard deviations for each sample. Parameters for median absolute deviation (MAD) transformation are calculated if "mad" is specified.</p>
    
    <h2 class="hasAnchor" id="specifying-subset-parameters-using-the-params-argument"><a class="anchor" href="#specifying-subset-parameters-using-the-params-argument"></a>Specifying Subset Parameters Using the <code>params</code> Argument</h2>

    
    <p>Parameters for the chosen subset function should be specified in a list with the function specification followed by an equal sign and the desired parameter value. For example, if LOS with 0.1 is desired, one should use <code>params = list(los = 0.1)</code>. ppp_rip can be specified in one of two ways: specify the parameters with each separate function or combine using a nested list (e.g. <code>params = list(ppp_rip = list(ppp = 0.5, rip = 0.2))</code>).</p>
<p>The following functions have parameters that can be specified:</p><table class='table'>
<tr><td></td><td>los</td></tr>
<tr><td>a value between 0 and 1 indicating the top proportion of order statistics. Defaults to 0.05 if unspecified.</td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td>ppp</td><td>a value between 0 and 1 specifying the proportion of samples that must have non-missing values for a feature to be retained. Defaults to 0.5 if unspecified.</td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td>rip</td></tr>
<tr><td>a value between 0 and 1 specifying the p-value threshold for determining rank invariance. Defaults to 0.2 if unspecified.</td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td>ppp_rip</td><td>two values corresponding to the RIP and PPP parameters above. Defaults to 0.5 and 0.2, respectively.</td></tr>
<tr><td></td><td></td></tr>
</table>
    
    <h2 class="hasAnchor" id="backtransform"><a class="anchor" href="#backtransform"></a>Backtransform</h2>

    
    <p>The purpose of back transforming data is to ensure values are on a scale similar to their raw values before normaliztion. The following values are calculated and/or applied for backtransformation purposes:</p><table class='table'>
<tr><td></td><td><code>median</code></td></tr>
<tr><td></td><td>scale is NULL and location parameter is a global median across all samples</td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><code>mean</code></td></tr>
<tr><td></td><td>scale is NULL and location parameter is a global median across all samples</td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><code>zscore</code></td></tr>
<tr><td></td><td>scale is pooled standard deviation and location is global mean across all samples</td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><code>mad</code></td></tr>
<tr><td></td><td>scale is pooled median absolute deviation and location is global median across all samples</td></tr>
<tr><td></td><td></td></tr>
</table>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>dontrun{
library(pmartRdata)
data(lipid_object)
lipid_object <- edata_transform(omicsData = lipid_object, data_scale="log2")
lipid_object <- group_designation(omicsData = lipid_object, main_effects = "Condition")
norm_object <- normalize_global(omicsData = lipid_object, subset_fn = "all", norm_fn = "median")
norm_object <- normalize_global(omicsData = lipid_object, subset_fn = "all", norm_fn = "median", apply_norm = FALSE, backtransform = TRUE)
norm_data <- normalize_global(omicsData = lipid_object, subset_fn = "all", norm_fn = "median", apply_norm = TRUE, backtransform = TRUE)
}

</div><div class='output co'>#&gt; <span class='error'>Error: &lt;text&gt;:1:8: unexpected '{'</span>
#&gt; <span class='error'>1: dontrun{</span>
#&gt; <span class='error'>           ^</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#subset-functions">Subset Functions</a></li>

      <li><a href="#normalization-functions">Normalization Functions</a></li>

      <li><a href="#specifying-subset-parameters-using-the-params-argument">Specifying Subset Parameters Using the <code>params</code> Argument</a></li>

      <li><a href="#backtransform">Backtransform</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Lisa Bramer</p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Lisa Bramer, Kelly Stratton.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

